(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6797:function(e,a,s){Promise.resolve().then(s.bind(s,4591))},4591:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return l}});var n=s(7437),t=s(2265),i=s(6463),r=s(5798),o=s(7984),c=s.n(o);let d=[{name:"Nexus",domain:"nexus.pi",emoji:"\uD83C\uDF10",desc:"بوابة المنظومة"},{name:"Commerce",domain:"commerce.pi",emoji:"\uD83D\uDED2",desc:"التجارة الرقمية"},{name:"Assets",domain:"assets.pi",emoji:"\uD83D\uDC8E",desc:"الأصول الرقمية"},{name:"Fundx",domain:"fundx.pi",emoji:"\uD83C\uDFE6",desc:"التمويل والاستثمار"},{name:"Estate",domain:"estate.pi",emoji:"\uD83C\uDFE0",desc:"العقارات الرقمية"},{name:"Analytics",domain:"analytics.pi",emoji:"\uD83D\uDCCA",desc:"تحليل البيانات"},{name:"Connection",domain:"connection.pi",emoji:"\uD83D\uDD17",desc:"شبكة التواصل"},{name:"Life",domain:"life.pi",emoji:"❤️",desc:"خدمات يومية"},{name:"Insure",domain:"insure.pi",emoji:"\uD83D\uDEE1️",desc:"التأمين الرقمي"},{name:"Vip",domain:"vip.pi",emoji:"\uD83D\uDC51",desc:"عضوية مميزة"},{name:"Zone",domain:"zone.pi",emoji:"\uD83C\uDF0E",desc:"مجتمعات رقمية"},{name:"Explorer",domain:"explorer.pi",emoji:"\uD83D\uDD0D",desc:"تصفح النشاط"},{name:"Alert",domain:"alert.pi",emoji:"\uD83D\uDEA8",desc:"مركز الإشعارات"},{name:"System",domain:"system.pi",emoji:"⚙️",desc:"إدارة النظام"},{name:"Ecommerce",domain:"ecommerce.pi",emoji:"\uD83C\uDFEC",desc:"متاجر إلكترونية"},{name:"Dx",domain:"dx.pi",emoji:"\uD83E\uDDEA",desc:"أدوات المطورين"},{name:"Nx",domain:"nx.pi",emoji:"\uD83D\uDD27",desc:"تكامل الخدمات"},{name:"Nbf",domain:"nbf.pi",emoji:"\uD83D\uDCB3",desc:"خدمات مالية"},{name:"Epic",domain:"epic.pi",emoji:"\uD83D\uDD25",desc:"منتجات إبداعية"},{name:"Legend",domain:"legend.pi",emoji:"\uD83C\uDF1F",desc:"Gamification"},{name:"Titan",domain:"titan.pi",emoji:"⚔️",desc:"خدمات مؤسسية"},{name:"Elite",domain:"elite.pi",emoji:"\uD83E\uDD47",desc:"خدمات احترافية"},{name:"Brookfield",domain:"brookfield.pi",emoji:"\uD83C\uDFE2",desc:"استثمارات مؤسسية"}];function l(){let{user:e,isAuthenticated:a,isLoading:s,logout:o,isNewUser:l}=(0,r.z)(),u=(0,i.useRouter)();return((0,t.useEffect)(()=>{s||a||u.push("/")},[a,s,u]),s||!e)?(0,n.jsx)("div",{className:c().loading,children:(0,n.jsx)("div",{className:c().loadingSpinner})}):(0,n.jsxs)("div",{className:c().page,children:[(0,n.jsxs)("aside",{className:c().sidebar,children:[(0,n.jsx)("div",{className:c().sidebarLogo,children:(0,n.jsx)("span",{className:"gold-text ".concat(c().logoText),children:"TEC"})}),(0,n.jsx)("nav",{className:c().nav,children:[{icon:"⊞",label:"Dashboard",active:!0},{icon:"◎",label:"المحفظة",active:!1},{icon:"◈",label:"الاشتراك",active:!1},{icon:"◇",label:"الأمان",active:!1}].map(e=>(0,n.jsxs)("button",{className:"".concat(c().navItem," ").concat(e.active?c().navItemActive:""),children:[(0,n.jsx)("span",{children:e.icon}),(0,n.jsx)("span",{children:e.label})]},e.label))}),(0,n.jsx)("button",{className:c().logoutBtn,onClick:()=>{o(),u.push("/")},children:"⟵ خروج"})]}),(0,n.jsxs)("main",{className:c().main,children:[(0,n.jsxs)("header",{className:c().header,children:[l&&(0,n.jsx)("div",{className:"".concat(c().welcomeBanner," fade-up"),children:"\uD83C\uDF89 مرحباً بك في TEC — حسابك جاهز"}),(0,n.jsxs)("div",{className:c().headerRow,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:c().greeting,children:"مرحباً،"}),(0,n.jsxs)("h1",{className:c().username,children:["@",e.piUsername,(0,n.jsx)("span",{className:c().roleBadge,children:e.role})]})]}),(0,n.jsxs)("div",{className:c().planBadge,children:["◈ ",e.subscriptionPlan||"Free"]})]})]}),(0,n.jsx)("div",{className:"".concat(c().statsGrid," fade-up-1"),children:[{label:"رصيد Pi",value:"0.00 π",sub:"محفظة TEC"},{label:"التطبيقات المتاحة",value:"1 / 24",sub:"TEC App نشط"},{label:"الاشتراك",value:e.subscriptionPlan||"Free",sub:"ترقية للـ Pro"},{label:"KYC",value:"Pending",sub:"التحقق من الهوية"}].map(e=>(0,n.jsxs)("div",{className:c().statCard,children:[(0,n.jsx)("p",{className:c().statLabel,children:e.label}),(0,n.jsx)("p",{className:"".concat(c().statValue," gold-text"),children:e.value}),(0,n.jsx)("p",{className:c().statSub,children:e.sub})]},e.label))}),(0,n.jsxs)("section",{className:"".concat(c().appsSection," fade-up-2"),children:[(0,n.jsxs)("div",{className:c().sectionHeader,children:[(0,n.jsx)("h2",{className:c().sectionTitle,children:"منظومة TEC"}),(0,n.jsx)("span",{className:c().sectionMeta,children:"24 تطبيق"})]}),(0,n.jsxs)("div",{className:c().appsGrid,children:[(0,n.jsxs)("div",{className:"".concat(c().appCard," ").concat(c().appCardActive),children:[(0,n.jsx)("span",{style:{fontSize:"20px"},children:"\uD83D\uDD37"}),(0,n.jsxs)("div",{className:c().appInfo,children:[(0,n.jsx)("span",{className:c().appName,children:"TEC"}),(0,n.jsx)("span",{className:c().appDomain,children:"tec.pi"})]}),(0,n.jsx)("span",{className:c().appLive,children:"Live"})]}),d.map(e=>(0,n.jsxs)("div",{className:c().appCard,children:[(0,n.jsx)("span",{style:{fontSize:"20px"},children:e.emoji}),(0,n.jsxs)("div",{className:c().appInfo,children:[(0,n.jsx)("span",{className:c().appName,children:e.name}),(0,n.jsx)("span",{className:c().appDomain,children:e.domain})]}),(0,n.jsx)("span",{className:c().appSoon,children:"قريباً"})]},e.name))]})]})]})]})}},5798:function(e,a,s){"use strict";s.d(a,{z:function(){return d}});var n=s(2265);let t=s(357).env.NEXT_PUBLIC_AUTH_SERVICE_URL||"http://localhost:4001",i=()=>void 0!==window.Pi,r=async()=>{if(!i())throw Error("يجب فتح التطبيق داخل Pi Browser");let e=await window.Pi.authenticate(["username","payments","wallet_address"],e=>console.log("Incomplete payment:",e)),a=await fetch("".concat(t,"/api/v1/auth/pi-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:e.accessToken,appSource:"tec"})});if(!a.ok)throw Error("فشل تسجيل الدخول — حاول مرة أخرى");let s=await a.json();return localStorage.setItem("tec_access_token",s.tokens.accessToken),localStorage.setItem("tec_refresh_token",s.tokens.refreshToken),localStorage.setItem("tec_user",JSON.stringify(s.user)),s},o=()=>{let e=localStorage.getItem("tec_user");return e?JSON.parse(e):null},c=()=>{localStorage.removeItem("tec_access_token"),localStorage.removeItem("tec_refresh_token"),localStorage.removeItem("tec_user")},d=()=>{let[e,a]=(0,n.useState)({user:null,isLoading:!0,isAuthenticated:!1,isNewUser:!1,error:null,isPiBrowserEnv:!1});(0,n.useEffect)(()=>{let e=o();a(a=>({...a,user:e,isAuthenticated:!!e,isLoading:!1,isPiBrowserEnv:i()}))},[]);let s=(0,n.useCallback)(async()=>{a(e=>({...e,isLoading:!0,error:null}));try{let e=await r();return a(a=>({...a,user:e.user,isAuthenticated:!0,isNewUser:e.isNewUser,isLoading:!1,error:null})),e}catch(e){throw a(a=>({...a,isLoading:!1,error:e.message||"فشل تسجيل الدخول"})),e}},[]),t=(0,n.useCallback)(()=>{c(),a(e=>({...e,user:null,isAuthenticated:!1,isNewUser:!1}))},[]);return{...e,login:s,logout:t}}},6463:function(e,a,s){"use strict";var n=s(1169);s.o(n,"useRouter")&&s.d(a,{useRouter:function(){return n.useRouter}})},357:function(e,a,s){"use strict";var n,t;e.exports=(null==(n=s.g.process)?void 0:n.env)&&"object"==typeof(null==(t=s.g.process)?void 0:t.env)?s.g.process:s(8081)},8081:function(e){!function(){var a={229:function(e){var a,s,n,t=e.exports={};function i(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function o(e){if(a===setTimeout)return setTimeout(e,0);if((a===i||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(s){try{return a.call(null,e,0)}catch(s){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:i}catch(e){a=i}try{s="function"==typeof clearTimeout?clearTimeout:r}catch(e){s=r}}();var c=[],d=!1,l=-1;function u(){d&&n&&(d=!1,n.length?c=n.concat(c):l=-1,c.length&&m())}function m(){if(!d){var e=o(u);d=!0;for(var a=c.length;a;){for(n=c,c=[];++l<a;)n&&n[l].run();l=-1,a=c.length}n=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===r||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(a){try{return s.call(null,e)}catch(a){return s.call(this,e)}}}(e)}}function p(e,a){this.fun=e,this.array=a}function h(){}t.nextTick=function(e){var a=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)a[s-1]=arguments[s];c.push(new p(e,a)),1!==c.length||d||o(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=h,t.addListener=h,t.once=h,t.off=h,t.removeListener=h,t.removeAllListeners=h,t.emit=h,t.prependListener=h,t.prependOnceListener=h,t.listeners=function(e){return[]},t.binding=function(e){throw Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw Error("process.chdir is not supported")},t.umask=function(){return 0}}},s={};function n(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}},r=!0;try{a[e](i,i.exports,n),r=!1}finally{r&&delete s[e]}return i.exports}n.ab="//";var t=n(229);e.exports=t}()},7984:function(e){e.exports={loading:"dashboard_loading__zctVA",loadingSpinner:"dashboard_loadingSpinner__Ny9_U","rotate-slow":"dashboard_rotate-slow__zrWtN",page:"dashboard_page__TZrNk",sidebar:"dashboard_sidebar__25lmX",sidebarLogo:"dashboard_sidebarLogo__xLfBs",logoText:"dashboard_logoText__thd8a",nav:"dashboard_nav__uwTGm",navItem:"dashboard_navItem__dmXrG",navItemActive:"dashboard_navItemActive__F4RPW",logoutBtn:"dashboard_logoutBtn__fx4Tq",main:"dashboard_main__6jQ_n",header:"dashboard_header__IYRHh",welcomeBanner:"dashboard_welcomeBanner__jwuab",headerRow:"dashboard_headerRow__TcqbE",greeting:"dashboard_greeting__AlbUl",username:"dashboard_username__JWmSn",roleBadge:"dashboard_roleBadge__ylPx2",planBadge:"dashboard_planBadge__M_VfX",statsGrid:"dashboard_statsGrid__nYbjV",statCard:"dashboard_statCard__YcX7f",statLabel:"dashboard_statLabel__3j_RC",statValue:"dashboard_statValue__xOYXu",statSub:"dashboard_statSub__4GUYo",appsSection:"dashboard_appsSection__ZfiYc",sectionHeader:"dashboard_sectionHeader__VE5VQ",sectionTitle:"dashboard_sectionTitle__GM02B",sectionMeta:"dashboard_sectionMeta__b7C5s",appsGrid:"dashboard_appsGrid__b9rUF",appCard:"dashboard_appCard__Re6sm",appCardActive:"dashboard_appCardActive__elv41",appInfo:"dashboard_appInfo__4WbnM",appName:"dashboard_appName__5kNPJ",appDomain:"dashboard_appDomain__7NIg0",appLive:"dashboard_appLive__7oFGB",appSoon:"dashboard_appSoon__fZaS_"}}},function(e){e.O(0,[830,971,23,744],function(){return e(e.s=6797)}),_N_E=e.O()}]);